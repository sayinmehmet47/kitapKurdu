version: '3.9'
services:
  backend: 
    image: sayinmehmet47/backend-kitapkurdu-1:latest
    restart: always
    volumes:
      - ./backend/:/var/www/app
      - /usr/app/node_modules
    ports:
      - 5000:5000
    labels:
      kompose.image-pull-secret: "regcred"
    environment:
      - MONGO_URI=XXXXXXXXXXXXXX
        JWT_SECRET=XXXXXXXXX
        PORT=5000 
  client: 
    image: sayinmehmet47/client-kitapkurdu-1:latest 
    restart: always
    volumes:
      - ./client/:/usr/app
      - /usr/app/node_modules
    depends_on:
      - backend
    ports:
      - 3000:3000 
    labels:
      kompose.image-pull-secret: "regcred"
    environment:
      - REACT_APP_LOCAL_API=http://localhost:5000